<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Advent Calendar </title>
<style>
  :root {
    --bg-start: #071b2b;
    --bg-end: #0e2a32;
    --accent: #b80f13;
    --muted: #9aa6b2;
    --modal-bg: rgba(6,10,15,0.96);
    --glass: rgba(255,255,255,0.02);
    --white: #ffffff;
    font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
  }

  html,body{height:100%;margin:0}
  body{
    background: linear-gradient(180deg,var(--bg-start),var(--bg-end));
    color:var(--white); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    display:flex;align-items:center;justify-content:center;padding:18px;box-sizing:border-box;
  }

  /* Outer scene */
  .scene{
    width:100%; max-width:1200px; height:88vh; min-height:680px;
    margin: 0 auto; /* center horizontally */
    background: radial-gradient(ellipse at top left, rgba(255,255,255,0.03), transparent 18%), rgba(0,0,0,0.06);
    border-radius:18px; padding:22px; box-shadow: 0 18px 70px rgba(0,0,0,0.6);
    position:relative; overflow:hidden;
    display: flex; flex-direction: column; align-items: center;
  }

  .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
  .title{display:flex;gap:12px;align-items:center}
  .title h1{margin:0;font-size:20px}
  .subtitle{font-size:13px;opacity:.95}

  /* Grid: responsive but always create 24 tiles */
  .grid{
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 24px;
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
    padding: 24px;
    box-sizing: border-box;
    aspect-ratio: 1.5;
  }

  /* Door tiles (bigger to avoid overlap) */
  .door{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));
    border-radius:14px; position:relative; overflow:hidden;
    display:flex;align-items:center;justify-content:center;cursor:pointer;
    transition:transform .12s ease, box-shadow .12s ease, background .18s;
    border:1px solid rgba(255,255,255,0.03); user-select:none;
    width: 100%;
    height: 100%;
    padding: 12px;
    box-sizing: border-box;
  }
  .door:active{transform:scale(.995)}
  .door:focus{outline:3px solid rgba(184,15,19,0.14); outline-offset:2px}
  .door:hover{box-shadow:0 18px 50px rgba(0,0,0,0.5); transform: translateY(-4px); }

  .door .content{ text-align:center; pointer-events:none; display:flex;flex-direction:column;align-items:center;justify-content:center;height:100% }
  .door .num{
    font-weight:900;font-size:48px;line-height:1;color:var(--white);
    text-shadow: 0 6px 20px rgba(0,0,0,0.6);
  }
  .door .label{ font-size:14px; color: #fff; opacity:0.7; margin-bottom:4px; text-transform:uppercase; letter-spacing:0.5px }

  /* locked / opened states */
  .door.locked{ opacity:0.64; filter:grayscale(6%); }
  .door.opened{ box-shadow: inset 0 -12px 30px rgba(0,0,0,0.18); }
  /* top-right small lock badge */
  .door .lock-overlay{
    position:absolute; top:8px; right:8px; left:auto; height:auto; width:auto;
    display:flex;align-items:center;justify-content:center;
    background: rgba(6,10,15,0.18); padding:6px; border-radius:8px; pointer-events:none;
    transition:opacity 220ms ease, transform 220ms ease;
  }
  .door:not(.locked) .lock-overlay{ opacity:0; transform: translateY(-6px); visibility:hidden }
  .door.locked .lock-overlay{ opacity:1; transform: translateY(0); visibility:visible }
  .lock-icon{ width:18px; height:18px; opacity:0.96; filter:drop-shadow(0 2px 6px rgba(0,0,0,0.35)); }

  /* overlay / modal: very dark and large */
  .overlay{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    background: rgba(6,10,15,0.45); z-index:999; padding:28px; box-sizing:border-box;
    backdrop-filter: blur(6px);
    opacity:0; transition:opacity 260ms ease;
  }
  .overlay.open{ display:flex; opacity:1; }

  /* modal animation: slide up + scale + fade */
  .modal{
    width:100%; max-width:1180px; max-height:92vh; overflow:auto;
    background: var(--modal-bg); color:#e6eef6; border-radius:14px; padding:30px;
    box-shadow: 0 30px 90px rgba(3,7,18,0.8);
    transform: translateY(18px) scale(.985); opacity:0;
    transition: transform 360ms cubic-bezier(.18,.9,.32,1), opacity 260ms ease;
    will-change: transform, opacity;
    border: 1px solid rgba(255,255,255,0.03);
  }
  .overlay.open .modal{ transform: translateY(0) scale(1); opacity:1; }

  /* layout inside modal: left area large and mostly empty, top-left big number + name; right column photo + short text */
  .modal-grid{
    display:grid;
    grid-template-columns: 1fr 380px;
    gap:26px;
    align-items:start;
  }

  .left{
    display:flex;flex-direction:column;gap:12px;
    min-height:420px;
  }

  /* top row in left: big number + name to the right */
  .big-row{
    display:flex; align-items:flex-start; gap:22px;
  }
  .big-num{
    font-weight:900; font-size:110px; line-height:0.86; color:rgba(255,255,255,0.96);
    text-shadow: 0 12px 36px rgba(0,0,0,0.7);
    font-family: 'Helvetica Neue', Inter, system-ui, sans-serif;
    min-width:120px;
  }
  .player-title{
    display:flex;flex-direction:column; justify-content:center;
  }
  .player-name{
    font-size:32px; font-weight:900; margin:0; color:#fff;
    letter-spacing: -0.6px;
  }
  .player-meta{ font-size:14px; color:var(--muted); margin-top:6px }

  /* right column */
  .right{
    display:flex;flex-direction:column;align-items:center;gap:12px;
  }
  .photo{
    width:340px; height:460px; border-radius:12px; background:linear-gradient(180deg,#15232a,#0f191e);
    display:flex;align-items:center;justify-content:center;color:#9fb0bf;font-size:14px; box-shadow:0 14px 50px rgba(0,0,0,0.6);
    overflow:hidden;border:1px solid rgba(255,255,255,0.03);
  }
  .photo img{ width:100%; height:100%; object-fit:cover; display:block }
  .photo-caption{ font-size:13px; color:var(--muted); text-align:center; margin-top:6px; }
  .photo-caption:empty{ display:none }

  .short-text{
    margin-top:8px; background: rgba(255,255,255,0.02); padding:12px; border-radius:8px;
    font-size:15px; color:#e6eef6; text-align:left; width:100%; box-sizing:border-box;
    min-height:68px;
  }

  .modal-footer{ display:flex; justify-content:space-between; align-items:center; margin-top:18px; gap:12px; flex-wrap:wrap }
  .footer-note{ color:var(--muted); font-size:13px }
  .close-btn{
    background:none;border:0;color:var(--muted);font-weight:700;font-size:15px;cursor:pointer;padding:8px 12px;border-radius:8px;
  }
  .close-btn:hover{ color:#fff; background:rgba(255,255,255,0.02) }

  /* snowflake layer */
  .snow{
    position:fixed; inset:0; pointer-events:none; z-index:480; overflow:hidden;
  }
  .snow .flake{
    position:absolute; top:-10vh; will-change:transform,opacity;
    transform-origin: center; pointer-events:none;
    font-family: 'Segoe UI Emoji','Apple Color Emoji','Noto Color Emoji',sans-serif;
    text-shadow: 0 4px 8px rgba(0,0,0,0.25);
  }

  /* unlock timer bar */
  .unlock-timer{
    margin-top:12px; display:flex;align-items:center;justify-content:center; gap:10px;
    font-size:14px; color:var(--muted); background: rgba(255,255,255,0.02);
    padding:8px 12px; border-radius:10px; width:100%; max-width:420px; box-sizing:border-box;
    border:1px solid rgba(255,255,255,0.03);
  }

  /* centered cover that blocks doors before Dec 1 */
  .doors-cover{
    position:absolute;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    z-index:720;
    pointer-events:auto;
    background: linear-gradient(rgba(6,10,15,0.6), rgba(6,10,15,0.6));
   }
   .doors-cover .card{
    background: rgba(10,14,18,0.9);
    padding:24px 28px;
    border-radius:12px;
    text-align:center;
    box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    border: 1px solid rgba(255,255,255,0.04);
    color: var(--white);
    max-width:560px;
    width:90%;
   }
   .doors-cover .label{ font-weight:800; font-size:16px; margin-bottom:8px; color:var(--muted) }
   .doors-cover .count{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Segoe UI Mono', monospace; font-size:34px; font-weight:900; color:var(--accent) }
   .doors-cover .note{ margin-top:8px; color:var(--muted); font-size:13px }

  @keyframes snow-fall{
    0%{transform: translateY(-10vh) rotate(0deg); opacity:0}
    10%{opacity:1}
    100%{transform: translateY(110vh) rotate(360deg); opacity:1}
  }
  @media (prefers-reduced-motion: reduce){
    .snow .flake{ animation: none !important; }
  }

  /* responsive */
  @media (max-width:1100px){
    .modal-grid{ grid-template-columns: 1fr 320px }
    .photo{ width:300px; height:420px }
    .big-num{ font-size:90px }
  }
  @media (max-width:820px){
    .grid{ grid-template-columns: repeat(4, 1fr) } /* fewer columns on smaller screens */
    .modal-grid{ grid-template-columns: 1fr }
    .right{ order:-1; width:100%; align-items:center }
    .photo{ width:100%; height:420px; max-width:520px }
    .big-num{ font-size:72px }
  }
  @media (max-width:460px){
    .grid{ grid-template-columns: repeat(2, 1fr) }
    .big-num{ font-size:58px }
    .player-name{ font-size:22px }
    .photo{ height:360px }
  }

  /* reduce motion preference */
  @media (prefers-reduced-motion: reduce){
    .modal{ transition:none !important; transform:none !important; opacity:1 !important; }
    .overlay{ transition:none !important; opacity:1 !important; }
  }

  /* system modal (centered messages for admin/system feedback) */
  .sys-modal{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:1600;
    pointer-events:auto;
  }
  .sys-card{
    background:var(--modal-bg);
    color:var(--white);
    padding:16px 18px;
    border-radius:10px;
    min-width:260px;
    max-width:560px;
    box-shadow:0 20px 80px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.04);
  }
  .sys-card.success{ border-color: rgba(40,170,70,0.14); }
  .sys-card.error{ border-color: rgba(200,50,50,0.14); }
  .sys-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:12px; }
</style>
</head>
<body>
  <div class="scene" role="application" aria-label="Advent calendar — players">
    <div class="header">
      <div class="title">
        <div style="width:48px;height:48px;background:rgb(255,0,0);display:flex;align-items:center;justify-content:center">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill="#fff" d="M13 6h6v7h7v6h-7v7h-6v-7H6v-6h7V6z"/>
          </svg>
        </div>
        <h1>Advent Calendar</h1>
        <div style="width:48px;height:48px;border-radius:6px;background:white;display:flex;align-items:center;justify-content:center;margin-left:12px;box-shadow:0 2px 6px rgba(0,0,0,0.12)" aria-label="Flag of England" role="img">
          <svg width="28" height="28" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="false">
            <rect width="64" height="64" fill="#ffffff"/>
            <!-- central red St George's cross -->
            <rect x="26" width="12" height="64" fill="#CE1126"/>
            <rect y="26" width="64" height="12" fill="#CE1126"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Admin button (persistent and visible) -->
    <button id="adminLockBtn" aria-label="Admin unlock" title="Admin unlock" style="position:fixed;top:12px;right:12px;z-index:1400;padding:8px;border:0;background:transparent;border-radius:8px;cursor:pointer;color:var(--muted);box-shadow:0 6px 18px rgba(0,0,0,0.25);">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a4 4 0 0 0-4 4v2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-2V6a4 4 0 0 0-4-4z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
    </button>

    <div class="grid" id="grid" aria-live="polite"></div>
    <!-- unlock timer (shows countdown until Dec 1 / next unlock) -->
    <div id="unlockTimer" class="unlock-timer" aria-live="polite" style="display:none">
      <div id="unlockLabel" style="font-weight:700;color:var(--white);margin-right:8px">Calendar unlocks in</div>
      <div style="font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Segoe UI Mono', monospace; font-weight:800; font-size:16px; color:var(--accent)"><span id="unlockCountdown">00:00:00:00</span></div>
    </div>

    <!-- doors cover: centered countdown and message (blocks interaction) -->
    <div id="doorsCover" class="doors-cover" aria-hidden="true">
      <div class="card" role="status" aria-live="polite">
        <div class="label" id="coverLabel">Calendar unlocks in</div>
        <div class="count" id="coverCountdown">00:00:00:00</div>
        <div class="note">All doors will become available on December 1st local time. Admin override bypasses this.</div>
      </div>
    </div>
  </div>

  <!-- snow layer (visual only) -->
  <div class="snow" aria-hidden="true"></div>

  <!-- overlay modal -->
  <div class="overlay" id="overlay" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document" aria-labelledby="modalTitle" aria-describedby="modalMeta modalShortText">
      <div class="modal-grid">
        <div class="left">
          <div class="big-row">
            <div class="big-num" id="modalNumber">01</div>
            <div class="player-title">
              <div id="modalTitle" class="player-name">Hannah Hampton</div>
              <div id="modalMeta" class="player-meta">Tag 1 — Goalkeeper (England)</div>
            </div>
          </div>

          <div id="modalShortText" class="short-text">Hannah Hampton (born 16 March 2000) is an English goalkeeper known for her shot-stopping and intelligent distribution. Replace this with your curated short blurb.</div>
        </div>

        <div class="right">
          <div class="photo" id="modalPhoto"></div>
          <div id="modalPhotoCaption" class="photo-caption"></div>
        </div>
      </div>

      <div class="modal-footer">
        <div class="footer-note">Click outside or press ESC to close • Use ← → to navigate</div>
        <button class="close-btn" id="closeBtn" aria-label="Close profile">Close ✕</button>
      </div>
    </div>
  </div>

  <!-- Admin unlock elements (hidden by default) -->
  <div id="adminOverlay" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:1200">
    <div style="background:var(--modal-bg);padding:18px;border-radius:12px;max-width:420px;width:100%;box-sizing:border-box;color:var(--white);box-shadow:0 18px 60px rgba(0,0,0,0.55);border:1px solid rgba(255,255,255,0.03)">
      <div style="font-weight:800;font-size:16px;margin-bottom:8px">Admin unlock</div>
      <div style="margin-bottom:12px;color:var(--muted)">Enter admin password to immediately unlock all days.</div>
      <input id="adminPass" type="password" placeholder="Password" style="width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);margin-bottom:12px;background:transparent;color:var(--white)" />
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button id="adminCancel" style="background:none;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:8px;color:var(--muted)">Cancel</button>
        <button id="adminSubmit" style="background:var(--accent);border:0;padding:8px 12px;border-radius:8px;color:#fff;font-weight:700">Unlock</button>
      </div>
    </div>
  </div>

  

<script>
  // Day 1 prefilled. Replace placeholders with your 24-player list as needed.
  const players = [
    {
      name: "Hannah Hampton",
      meta: "Tag 1 — Torhüterin (England)",
      short: " Hannah Hampton (England) Torhüterin, Jahrgang 2000, spielt in der Women’s Super League für Chelsea. Kam über Birmingham City und Aston Villa in die Nationalelf. Sie ist reaktionsschnell, stark in Eins-gegen-eins-Situationen und gilt als moderne Keeperin mit gutem Passspiel.",
      photoLabel: "Hannah Hampton",
      photo: "/images/hannah_hampton.jpg"
    },
    { name: "Lucy Bronze", meta: "Tag 2 — Rechtsverteidigerin (England) ", short: "Lucy Bronze Geboren: 28.10.1991, England Position: Rechtsverteidigerin Verein: Chelsea FC Nationalteam: England Lucy Bronze ist eine englische Fußballspielerin, die als Rechtsverteidigerin für Chelsea FC und die englische Nationalmannschaft spielt. Sie ist bekannt für ihre Schnelligkeit, Technik und ihre Fähigkeit, sowohl defensiv als auch offensiv Akzente zu setzen.", photoLabel: "Fran Kirby", photo: "/images/lucy.jpg" },
    { name: "Leila Wandeler", meta: "Tag 3 — Stürmerin (Schweiz)", short: "Leila Wandeler Geboren: 11. April 2006, Fribourg, Schweiz Position: Stürmerin Verein: West Ham United Karriere: Früher BSC Young Boys & Lyon, Debüt bei West Ham 2025 Nationalmannschaft: Schweiz, Debüt 2025 Stil: Schnelle, technisch starke Offensivspielerin", photoLabel: "Leila Wandeler", photo: "/images/leila_wandeler.jpg" },
    { name: "Noemi Ivelj", meta: "Tag 4 — Mittelfeld (Schweiz)", short: "Noemi Ivelj (18, Schweiz/Kroatien) – Mittelfeldspielerin Vereine: Grasshopper Club Zürich, Eintracht Frankfurt Schweiz B-Nationalmannschaft Aufgewachsen in Würenlos, Vater ehemaliger Profi", photoLabel: "Noemi Ivelj", photo: "/images/noemi.jpg" },
    { name: "Noelle Maritz", meta: "Tag 5 — Verteidigerin (Schweiz)", short: "Noelle Maritz, geboren am 23.12.1995 in Newport Beach (USA), ist eine Schweizer Verteidigerin (rechts), spielt aktuell für Aston Villa in der FA Women’s Super League, war zuvor beim FC Zürich, VfL Wolfsburg und Arsenal aktiv, gehört seit 2013 zur Schweizer Nationalmannschaft und gewann u.a. Schweizer Meisterschaft und Pokal (2012, 2013), fünf deutsche Meistertitel, sechs DFB-Pokale sowie 2014 die UEFA Women’s Champions League.", photoLabel: "Noelle Maritz", photo: "/images/noelle.jpg "},
    { name: "Geraldine Reuteler", meta: "Tag 6 — Stüermerin (Schweiz)", short: "Géraldine Reuteler, geboren am 21.04.1999 in der Schweiz, ist Stürmerin bei Eintracht Frankfurt und spielt für die Schweizer Nationalmannschaft (82 Spiele, 16 Tore); sie begann ihre Karriere beim FC Luzern, nahm an der UEFA Women’s EURO 2022 teil und wurde 2025 zur Schweizer Fußballerin des Jahres gewählt.", photoLabel: "Geraldine Reuteler", photo: "/images/geraldine.jpg "},
    { name: "Riola Xhemaili", meta: "Tag 7 — Mittelfeld (Schweiz)", short: "Riola Xhemaili, geboren am 5. März 2003 in Solothurn (Schweiz), Mittelfeldspielerin bei PSV Eindhoven, Schweizer Nationalspielerin mit kosovarischen Wurzeln, 34 Länderspiele und 7 Tore.", photoLabel: "Riola Xhemaili", photo: "/images/riola.jpg" },
    { name: "Nadine Riesen", meta: "Tag 8 — Linksverteidigerin (Schweiz)", short: "Nadine Riesen – Steckbrief: Geboren am 11. April 2000 in St. Gallen, Schweiz · Abwehrspielerin (Linksverteidigerin) · 168 cm groß · spielt für Eintracht Frankfurt Frauen · seit 2019 Schweizer Nationalspielerin mit 31 Länderspielen.", photoLabel: "Nadine Riesen", photo: "/images/nadine_riesen.jpg" }, 
    { name: "Beth Mead", meta: "Tag 9 — Stürmerin (England)", short: "Name: Beth Mead · Geburtsdatum: 9. Mai 1995 · Nationalität: Britisch · Position: Stürmerin · Aktueller Verein: Arsenal W.F.C. (England) · Besonderheit: Torschützenkönigin der UEFA Women's Euro 2022 und Schlüsselspielerin der englischen Nationalmannschaft", photoLabel: "Beth Mead", photo: "/images/beth.jpg" },
    { name: "Ramona Bachmann", meta: "Tag 10 — Stürmerin (Schweiz)", short: "Name: Ramona Bachmann • Geburtsdatum: 25. September 1990 • Nationalität: Schweizerin • Beruf: Profi-Fußballerin (Offensivspielerin) • Vereine: FC Zürich, Chelsea FC, VfL Wolfsburg, FC Barcelona • Nationalmannschaft: Schweizer Frauen-Nationalteam, über 100 Einsätze", photoLabel: "Ramona Bachmann", photo: "/images/ramona.jpg "},
    { name: "Lauren Hemp", meta: "Tag 11 — Flügel/Stürmerin (England)", short: "Lauren May Hemp – geboren am 7. August 2000 – ist eine englische Fußballerin, spielt als Flügelspielerin/Stürmerin und steht derzeit bei Manchester City unter Vertrag.", photoLabel: "Lauren Hemp", photo: "/images/lauren_hemp.jpg" },
    { name: "Livia PENG", meta: "Tag 12 — Torhüterin (Schweiz)", short: "Livia Peng – geboren am 14. März 2002 in Chur (Schweiz), Torhüterin, seit 2025 beim Chelsea FC, Mitglied der Schweizer A-Nationalmannschaft, mehrfache Schweizer Meisterin und Cupsiegerin mit dem FC Zürich.", photoLabel: "Livia PENG", photo: "/images/livia.jpg" },
    { name: "Lia Wälti", meta: "Tag 13 — Mittelfeld (Schweiz)", short: "Name: Lia Joëlle Wälti - Geburtsdatum: 19. April 1993 - Geburtsort: Langnau im Emmental, Schweiz - Position: Mittelfeldspielerin - Aktueller Verein: Juventus (seit 2025) - Nationalmannschaft: Kapitänin der Schweizer Nationalmannschaft seit 2019, Nationalspielerin seit 2011 - Frühere Vereine: Arsenal (2018–2025), davor FC Zürich - Erfolge: UEFA Women's Champions League Siegerin 2025 mit Arsenal, mehrfach Schweizer Meisterin mit FC Zürich - Besonderes: Veröffentlichtes Kinderbuch Lia am Ball über ihren Werdegang und Herausforderungen als Fußballerin", photoLabel: "Lia Wälti", photo: "/images/lia.jpg" },
    { name: "Smilla Vallotto", meta: "Tag 14 — Mittelfeld (Schweiz)", short: "Geburtsdatum und -ort: 23. März 2004 in Genf, Schweiz • Nationalität: Schweiz, Norwegen, Italien • Position: Mittelfeldspielerin • Aktueller Verein: VfL Wolfsburg (Bundesliga, Deutschland) • Sprachen: Deutsch, Englisch, Französisch, Norwegisch, Schwedisch, Spanisch • Smilla Vallotto wuchs in Norwegen auf und entschied sich, für die Schweiz zu spielen. Sie debütierte 2023 für die Schweizer Nationalmannschaft und wurde 2025 für die UEFA Women's EURO nominiert. Zuvor spielte sie erfolgreich für Hammarby IF in Schweden.", photoLabel: "Smilla Vallotto", photo: "/images/smilla.jpg" },
    { name: "Esme Morgan", meta: "Tag 15 — Innenverteidigerin (England)", short: "Geboren: 18. Oktober 2000 in Sheffield, England; Position: Innenverteidigerin; Vereine: Manchester City, Everton (Leihe), Washington Spirit; Nationalmannschaft: England; Stärken: technisch, passsicher, stark im Zweikampf.", photoLabel: "Esme Morgan", photo: "/images/esme.jpg" },
    { name: "Jessica Carter", meta: "Tag 16 — Verteidigerin (England)", short: "Jessica Carter – Geboren 1997 in Warwick, England. Abwehrspielerin/defensives Mittelfeld, 1,65 m. Spielte für Birmingham, Chelsea und seit 2024 für Gotham FC. Mit England UEFA Women's Euro 2022 & 2025-Siegerin, Vize-Weltmeisterin 2023. Verlobt mit Torhüterin Ann-Katrin Berger; bekannt für Vielseitigkeit und defensive Stärke.", photoLabel: "Jessica Carter", photo: "/images/jessica_carter.jpg" },
    { name: "Svenja Fölmli", meta: "Tag 17 — Stürmerin (Schweiz)", short: "Name: Svenja Julia Fölmli, Geburt: 19. August 2002 in Sursee, Schweiz, Position: Stürmerin, Verein: SC Freiburg (seit 2021), Nationalmannschaft: Schweiz (seit 2019), spielte bei der UEFA Women's EURO 2022 und 2025", photoLabel: "Svenja Fölmli", photo: "/images/svenja.jpg" },
    { name: "Chloe Kelly", meta: "Tag 18 — Stürmerin/Flügel (England)", short: "Geboren: 17. Januar 1998, London | Position: Stürmerin / Flügelspielerin | Verein: Arsenal Women | Erfolge: EM-Siegerin 2022 & 2025, Champions-League-Siegerin 2025 | Besonderheit: Berühmt für das EM-Finaltor 2022", photoLabel: "Chloe Kelly", photo: "/images/kloe.jpg" },
    { name: "Iman Beney", meta: "Tag 19 — Stürmerin (Schweiz)", short: "Iman Beney – Geboren am 23. Juli 2006 in Yverdon-les-Bains, Schweiz; Position: Stürmerin / offensives Mittelfeld; Verein: Manchester City (seit 2025); Nationalmannschaft: Schweiz (seit 2023); Besonderheit: Debütierte mit 16 Jahren in der Nationalmannschaft, Schweizer Meisterin mit YB Frauen 2025.", photoLabel: "Iman Beney", photo: "/images/iman.jpg" },
    { name: "Alayah Pilgrim", meta: "Tag 20 — Stürmerin (Schweiz)", short: "Alayah Pilgrim – Geboren am 29. April 2003 in Muri AG, Schweiz. Stürmerin (Linksaußen). Spielte für FC Muri, FC Aarau, FC Basel, FC Zürich und seit 2024 bei AS Roma. Schweizer Meisterin 2023, Italienische Meisterin 2024. Seit 2023 in der Schweizer A-Nationalmannschaft (10 Einsätze, 4 Tore).", photoLabel: "Alayah Pilgrim", photo: "/images/alayah.jpg" },
    { name: "Nadine Böhi", meta: "Tag 21 — Torhüterin (Schweiz)", short: "Geburtsdatum und -ort: 21. November 2003 in Flawil, Schweiz; Position: Torhüterin; Grösse: 1,78 m; Vereine: FC Niederwil, FC St. Gallen, 1. FC Union Berlin (seit Juni 2025); Nationalmannschaft: Seit 2024 Teil des Schweizer A-Nationalteams, Kadermitglied bei der UEFA Women's EURO 2025.", photoLabel: "Nadine Böhi", photo: "/images/nadine.jpg" },
    { name: "Sydney Schertenleib", meta: "Tag 22 — Mittelfeld (Schweiz)", short: "Geboren am 30. Januar 2007 in Zürich, Schweiz, Position Mittelfeldspielerin, spielt seit 2024 für den FC Barcelona, vorher bei FC Zürich und Grasshopper Club Zürich, seit 2024 in der Schweizer Nationalmannschaft aktiv.", photoLabel: "Sydney Schertenleib", photo: "/images/sydney.jpg" },
    { name: "Alessia Russo", meta: "Tag 23 — Stürmerin (England)", short: "Name: Alessia Russo, Geburtsdatum: 8. Februar 1999, Nationalität: Englisch, Position: Stürmerin, Verein: Manchester United (Frauen) / Englische Nationalmannschaft, Besonderheiten: Bekannt für Schnelligkeit, Technik und Kopfballstärke, hat in der Nationalmannschaft wichtige Tore bei großen Turnieren erzielt, zuvor bei Chelsea und Juventus aktiv.", photoLabel: "Alessia Russo", photo: "/images/alessia.jpg" },
    { name: "Player 24", meta: "Tag 24 — Player profile", short: "Short blurb for Player 24.", photoLabel: "Player 24" }
  ];

  const grid = document.getElementById('grid');
  const overlay = document.getElementById('overlay');
  const modalNumber = document.getElementById('modalNumber');
  const modalTitle = document.getElementById('modalTitle');
  const modalMeta = document.getElementById('modalMeta');
  const modalPhoto = document.getElementById('modalPhoto');
  const modalShortText = document.getElementById('modalShortText');
  const modalPhotoCaption = document.getElementById('modalPhotoCaption');
  const closeBtn = document.getElementById('closeBtn');

  // create 24 doors
  function createDoor(idx){
    const d = document.createElement('div');
    d.className = 'door';
    d.setAttribute('role','button');
    d.setAttribute('tabindex','0');
    d.setAttribute('aria-label', `Open Day ${idx+1}`);
    d.dataset.index = idx;

    const content = document.createElement('div');
    content.className = 'content';
    content.innerHTML = `<div class="label">Day</div><div class="num">${String(idx+1).padStart(2,'0')}</div>`;
    d.appendChild(content);

    // lock overlay (small badge in top-right)
    const lock = document.createElement('div');
    lock.className = 'lock-overlay';
    lock.innerHTML = '<svg class="lock-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a4 4 0 0 0-4 4v2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-2V6a4 4 0 0 0-4-4z" stroke="rgba(255,255,255,0.95)" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
    d.appendChild(lock);

    d.addEventListener('click', ()=> {
      if(d.classList.contains('locked')) return;
      if (idx === 23) { window.location.href = 'https://youtu.be/dQw4w9WgXcQ?si=olC1FApOz2jLyDSy'; return; }
      openModal(idx);
      // mark opened
      d.classList.add('opened');
      // remove lock badge when opened
      const lo = d.querySelector('.lock-overlay'); if(lo) lo.remove();
      saveOpened(idx);
    });
    d.addEventListener('keydown', (e)=> {
      if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        if(d.classList.contains('locked')) return;
        if (idx === 23) { window.location.href = 'https://youtu.be/dQw4w9WgXcQ?si=olC1FApOz2jLyDSy'; return; }
        openModal(idx);
        d.classList.add('opened');
        const lo2 = d.querySelector('.lock-overlay'); if(lo2) lo2.remove();
        saveOpened(idx);
      }
    });
    return d;
  }

  // populate grid with exactly 24 doors
  for(let i=0;i<24;i++) grid.appendChild(createDoor(i));

  // modal open/close / populate
  function openModal(idx){
    const p = players[idx];
    modalNumber.textContent = String(idx+1).padStart(2,'0');
    modalTitle.textContent = p.name;
    modalMeta.textContent = p.meta;
    modalShortText.textContent = p.short;
    if (p.photo) {
      modalPhoto.innerHTML = `<img src="${p.photo}" alt="${p.photoLabel}" loading="lazy" decoding="async" />`;
    } else {
      modalPhoto.textContent = p.photoLabel;
    }
    // no default caption text
    modalPhotoCaption.textContent = '';
    overlay.classList.add('open');
    overlay.setAttribute('aria-hidden','false');
    overlay.dataset.openIdx = idx;
    closeBtn.focus();
    document.body.style.overflow = 'hidden';
    // enable focus trap while modal open
    document.addEventListener('keydown', trapFocusHandler, true);
  }

  function closeModal(){
    const openedIdx = overlay.dataset.openIdx ? Number(overlay.dataset.openIdx) : null;
    overlay.classList.remove('open');
    overlay.setAttribute('aria-hidden','true');
    overlay.dataset.openIdx = '';
    document.body.style.overflow = '';
    document.removeEventListener('keydown', trapFocusHandler, true);
    // return focus
    if(openedIdx !== null && openedIdx >= 0){
      const door = grid.querySelector(`.door[data-index="${openedIdx}"]`);
      if(door) door.focus();
    } else {
      const firstDoor = grid.querySelector('.door');
      if(firstDoor) firstDoor.focus();
    }
  }

  overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeModal(); });
  closeBtn.addEventListener('click', ()=> closeModal());

  // Focus trap within modal for accessibility
  function getTabbables(container){
    return Array.from(container.querySelectorAll('a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])'))
      .filter(el => !el.hasAttribute('disabled') && !el.getAttribute('aria-hidden'));
  }
  function trapFocusHandler(e){
    if(!overlay.classList.contains('open')) return;
    if(e.key !== 'Tab') return;
    const focusables = getTabbables(overlay);
    if(focusables.length === 0) return;
    const first = focusables[0];
    const last = focusables[focusables.length - 1];
    if(e.shiftKey){
      if(document.activeElement === first || !overlay.contains(document.activeElement)){
        last.focus(); e.preventDefault();
      }
    } else {
      if(document.activeElement === last){
        first.focus(); e.preventDefault();
      }
    }
  }

  // keyboard: ESC, left/right navigation (skip Day 24)
  function nextIndexSkipping24(current, dir){
    const total = players.length;
    for(let i=0;i<total;i++){
      current = (current + dir + total) % total;
      if(current !== 23) return current; // skip index 23 (Day 24)
    }
    return Number(overlay.dataset.openIdx || 0);
  }
  document.addEventListener('keydown', (e)=>{
    if(overlay.classList.contains('open')){
      if(e.key === 'Escape') { closeModal(); return; }
      if(e.key === 'ArrowRight' || e.key === 'ArrowLeft'){
        const idx = Number(overlay.dataset.openIdx || 0);
        const dir = e.key === 'ArrowRight' ? 1 : -1;
        const next = nextIndexSkipping24(idx, dir);
        openModal(next);
      }
    }
  });

  // ensure focus outlines only for keyboard users
  document.body.addEventListener('keydown', function onFirstTab(e){
    if(e.key === 'Tab'){
      document.documentElement.classList.add('user-is-tabbing');
      document.body.removeEventListener('keydown', onFirstTab);
    }
  });

  // football-fall generator (adds decorative falling footballs)
  (function(){
    const container = document.querySelector('.snow');
    if(!container) return;
    container.innerHTML = '';
    const COUNT = 28;
    for(let i=0;i<COUNT;i++){
      const fl = document.createElement('div');
      fl.className = 'flake';
      fl.textContent = '⚽'; // soccer ball emoji
      const size = Math.round(10 + Math.random()*22); // px
      fl.style.fontSize = size + 'px';
      fl.style.left = (Math.random()*100).toFixed(2) + '%';
      const duration = (7 + Math.random()*10).toFixed(2) + 's';
      fl.style.animation = `snow-fall ${duration} linear ${Math.random()*-10}s infinite`;
      fl.style.opacity = (0.6 + Math.random()*0.4).toFixed(2);
      container.appendChild(fl);
    }
  })();

  // manage locked doors based on localStorage and day progression
  const STORAGE_KEY = 'advent_state';

  function getState(){
    try{
      return JSON.parse(localStorage.getItem(STORAGE_KEY)) || { opened: [], lastOpenedAt: null };
    }catch(e){ return { opened: [], lastOpenedAt: null }; }
  }

  function setState(state){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  }

  function saveOpened(idx){
    const state = getState();
    if(!state.opened) state.opened = [];
    if(!state.opened.includes(idx)){
      state.opened.push(idx);
    }
    state.lastOpenedAt = Date.now();
    setState(state);
  }

  function applyLocks(){
    const doors = Array.from(document.querySelectorAll('.door'));
    const state = getState();
    const opened = state.opened || [];

    // mark opened doors visually (opened status preserved)
    doors.forEach((d, i)=>{
      d.classList.toggle('opened', opened.includes(i));
    });

    // global Dec 1 lock check (local time)
    const now = new Date();
    const year = now.getFullYear();
    const decFirst = new Date(year, 11, 1); // month 11 = December
    const adminOverride = !!localStorage.getItem('advent_admin_override');

    // if before Dec 1 and no admin override -> lock everything
    let toUnlock;
    if(!adminOverride && now < decFirst){
      toUnlock = -1; // all i >=0 will be > -1 -> locked
    } else {
      // original per-day unlock logic
      if(opened.length === 0){
        toUnlock = 0;
      } else {
        const maxOpened = Math.max(...opened);
        const last = state.lastOpenedAt ? new Date(state.lastOpenedAt) : null;
        const today = new Date();
        const lastDateStr = last ? last.toDateString() : null;
        const todayStr = today.toDateString();
        if(last && todayStr !== lastDateStr){
          toUnlock = Math.min(maxOpened + 1, doors.length - 1);
        } else {
          toUnlock = maxOpened;
        }
      }
    }

    // apply lock/unlock classes and lock badges
    doors.forEach((d, i)=>{
      if(i > toUnlock){
        d.classList.add('locked');
        if(!d.querySelector('.lock-overlay')){
          const lock = document.createElement('div');
          lock.className = 'lock-overlay';
          lock.innerHTML = '<svg class="lock-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a4 4 0 0 0-4 4v2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-2V6a4 4 0 0 0-4-4z" stroke="rgba(255,255,255,0.95)" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
          d.appendChild(lock);
        }
      } else {
        d.classList.remove('locked');
        const lo = d.querySelector('.lock-overlay'); if(lo) lo.remove();
      }
    });
  }

  // helper to format countdown with days
  function formatCountdown(ms){
    if (ms <= 0) return '00 Days, 00 Hours, 00 Minutes and 00 Seconds';
    const total = Math.floor(ms / 1000);
    const days = Math.floor(total / 86400);
    let rem = total % 86400;
    const hours = Math.floor(rem / 3600);
    rem = rem % 3600;
    const minutes = Math.floor(rem / 60);
    const seconds = rem % 60;
    return `${String(days).padStart(2,'0')} Days, ${String(hours).padStart(2,'0')} Hours, ${String(minutes).padStart(2,'0')} Minutes and ${String(seconds).padStart(2,'0')} Seconds`;
  }

  // countdown timer for next unlock
  function formatTime(ms){
    if(ms <= 0) return '00:00:00';
    const total = Math.floor(ms/1000);
    const hrs = String(Math.floor(total/3600)).padStart(2,'0');
    const mins = String(Math.floor((total%3600)/60)).padStart(2,'0');
    const secs = String(total%60).padStart(2,'0');
    return `${hrs}:${mins}:${secs}`;
  }

  function updateUnlockTimer(){
    const el = document.getElementById('unlockTimer');
    const cd = document.getElementById('unlockCountdown');
    const lbl = document.getElementById('unlockLabel');
    const doorsCover = document.getElementById('doorsCover');
    const coverCd = document.getElementById('coverCountdown');
    const coverLbl = document.getElementById('coverLabel');
    if(!el || !cd) return;

    const adminOverride = !!localStorage.getItem('advent_admin_override');
    const now = new Date();
    const year = now.getFullYear();
    const decFirst = new Date(year, 11, 1);

    // if before Dec 1 and no admin override -> show global countdown
    if(!adminOverride && now < decFirst){
      const diff = decFirst - now;
      // hide small bottom timer and show centered cover
      if(el) el.style.display = 'none';
      if(doorsCover){ doorsCover.style.display = 'flex'; doorsCover.setAttribute('aria-hidden','false'); }
      if(coverLbl) coverLbl.textContent = 'Calendar unlocks in';
      if(coverCd) coverCd.textContent = formatCountdown(diff);
      return;
    }

    // otherwise fall back to the original next-unlock logic (per-day)
    if(doorsCover){ doorsCover.style.display = 'none'; doorsCover.setAttribute('aria-hidden','true'); }
    const state = getState();
    const opened = (state.opened||[]);
    if(!state.lastOpenedAt || opened.length === 0){
      if(el) el.style.display = 'none';
      return;
    }
    const last = new Date(state.lastOpenedAt);
    const nextMidnight = new Date(last);
    nextMidnight.setDate(last.getDate()+1);
    nextMidnight.setHours(0,0,0,0);
    const diff = nextMidnight - now;
    if(diff <= 0){
      if(el) el.style.display = 'none';
      applyLocks();
      return;
    }
    // show per-day countdown
    if(el) el.style.display = 'flex';
    if(lbl) lbl.textContent = 'Next unlock in';
    cd.textContent = formatTime(diff);
  }

  // start timer and refresh every second
  updateUnlockTimer();
  setInterval(updateUnlockTimer, 1000);

  // ensure timer updates after opening a door
  const originalSaveOpened = saveOpened;
  saveOpened = function(idx){ originalSaveOpened(idx); updateUnlockTimer(); applyLocks(); };

  // Admin unlock handling
  const ADMIN_KEY = 'advent_admin_override';
  const ADMIN_PW = 'letmein'; // change as needed

  const adminBtn = document.getElementById('adminLockBtn');
  const adminOverlay = document.getElementById('adminOverlay');
  const adminCancel = document.getElementById('adminCancel');
  const adminSubmit = document.getElementById('adminSubmit');
  const adminPass = document.getElementById('adminPass');

  function setAdminOverride(val){
    if(val) localStorage.setItem(ADMIN_KEY, '1'); else localStorage.removeItem(ADMIN_KEY);
    applyLocks(); updateUnlockTimer();
  }

  adminBtn.addEventListener('click', ()=>{
    if(overlay && overlay.classList.contains('open')) closeModal();
    const overrideActive = !!localStorage.getItem(ADMIN_KEY);
    if(overrideActive){
      const ok = confirm('Disable admin override and relock days?');
      if(!ok) return;
      localStorage.removeItem(ADMIN_KEY);
      const state = getState();
      state.opened = [0];
      state.lastOpenedAt = null;
      setState(state);
      applyLocks();
      updateUnlockTimer();
      alert('Admin override disabled and days re-locked');
      return;
    }
    adminOverlay.style.display = 'flex';
    adminPass.value = '';
    adminPass.focus();
  });
  adminCancel.addEventListener('click', ()=>{ adminOverlay.style.display = 'none'; });
  adminSubmit.addEventListener('click', ()=>{
    if(adminPass.value === ADMIN_PW){
      // unlock all
      setAdminOverride(true);
      // mark all opened
      const state = getState(); state.opened = Array.from({length:24}, (_,i)=>i); setState(state);
      applyLocks(); updateUnlockTimer();
      adminOverlay.style.display = 'none';
      alert('All days unlocked');
    } else {
      alert('Incorrect password');
    }
  });

  // enhance updateUnlockTimer to consider admin override
  const originalUpdateUnlockTimer = updateUnlockTimer;
  updateUnlockTimer = function(){
    const override = !!localStorage.getItem(ADMIN_KEY);
    if(override){
      const el = document.getElementById('unlockTimer');
      const cd = document.getElementById('unlockCountdown');
      if(el && cd){ el.style.display = 'flex'; cd.textContent = '00:00:00'; }
      return;
    }
    originalUpdateUnlockTimer();
  };

  /*
  // Injected admin button and handlers
  (function(){
    // Do nothing if already installed
    if(window.__adminInjected) return; window.__adminInjected = true;

    const ADMIN_KEY = 'advent_admin_override';
    const ADMIN_PW = 'letmein';

    // helper to create element from html
    function elFrom(html){ const t = document.createElement('template'); t.innerHTML = html.trim(); return t.content.firstChild; }

    // ensure sys modal container
    if(!document.getElementById('sysModalContainer')){
      const c = document.createElement('div'); c.id = 'sysModalContainer'; c.setAttribute('aria-hidden','true'); document.body.appendChild(c);
    }

    // ensure admin button exists
    if(!document.getElementById('adminLockBtn')){
      const btn = document.createElement('button');
      btn.id = 'adminLockBtn';
      btn.setAttribute('aria-label','Admin unlock');
      btn.title = 'Admin unlock';
      btn.style.position = 'fixed'; btn.style.top = '12px'; btn.style.right = '12px'; btn.style.zIndex = '1400'; btn.style.padding = '8px'; btn.style.border = '0'; btn.style.background = 'transparent'; btn.style.cursor='pointer'; btn.style.borderRadius='8px'; btn.style.color='var(--muted)';
      btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2a4 4 0 0 0-4 4v2H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2h-2V6a4 4 0 0 0-4-4z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
      document.body.appendChild(btn);
    }

    // attach handlers idempotently
    function attachAdminHandlers(){
      const btn = document.getElementById('adminLockBtn'); const overlay = document.getElementById('adminOverlay'); const pass = document.getElementById('adminPass'); const submit = document.getElementById('adminSubmit'); const cancel = document.getElementById('adminCancel');
      if(!btn) return; if(btn._attached) return; btn._attached = true;
      btn.addEventListener('click', ()=>{
        const active = !!localStorage.getItem(ADMIN_KEY);
        if(active){
          const ask = (typeof window.showSystemConfirm === 'function') ? window.showSystemConfirm('Disable admin override and relock days?') : Promise.resolve(confirm('Disable admin override and relock days?'));
          ask.then(ok=>{ if(!ok) return; localStorage.removeItem(ADMIN_KEY); try{ const s = getState(); s.opened=[0]; s.lastOpenedAt=null; setState(s); }catch(e){} if(typeof applyLocks==='function') applyLocks(); if(typeof updateUnlockTimer==='function') updateUnlockTimer(); window.showSystemMessage && window.showSystemMessage('Admin override disabled','success',2000); });
        } else { if(overlay){ overlay.style.display='flex'; if(pass){ pass.value=''; pass.focus(); } } }
      });
      if(submit && !submit._attached){ submit._attached = true; submit.addEventListener('click', ()=>{
        if(!pass) return; if(pass.value === ADMIN_PW){ localStorage.setItem(ADMIN_KEY,'1'); try{ const s = getState(); s.opened = Array.from({length:24},(_,i)=>i); setState(s); }catch(e){} if(typeof applyLocks==='function') applyLocks(); if(typeof updateUnlockTimer==='function') updateUnlockTimer(); if(overlay) overlay.style.display='none'; window.showSystemMessage && window.showSystemMessage('All days unlocked','success',2000); } else { window.showSystemMessage && window.showSystemMessage('Incorrect password','error',2000); } }); }
      if(cancel && !cancel._attached){ cancel._attached = true; cancel.addEventListener('click', ()=>{ if(overlay) overlay.style.display='none'; }); }
    }

    // wrap saveOpened to refresh timer/locks
    if(typeof saveOpened === 'function' && !window.__saveWrapped){ window.__saveWrapped = true; const orig = saveOpened; saveOpened = function(idx){ orig(idx); try{ if(typeof updateUnlockTimer==='function') updateUnlockTimer(); if(typeof applyLocks==='function') applyLocks(); }catch(e){} }; }

    // wrap updateUnlockTimer to honor admin override
    if(typeof updateUnlockTimer === 'function' && !window.__timerWrapped){ window.__timerWrapped = true; const origTimer = updateUnlockTimer; updateUnlockTimer = function(){ if(localStorage.getItem(ADMIN_KEY)){ const el = document.getElementById('unlockTimer'); const cd = document.getElementById('unlockCountdown'); if(el && cd){ el.style.display='flex'; cd.textContent='00:00:00'; } return; } return origTimer(); }; }

    // attach handlers now
    attachAdminHandlers();

    // ensure button reflects state
    const btn = document.getElementById('adminLockBtn'); if(btn) btn.classList.toggle('active', !!localStorage.getItem(ADMIN_KEY));
  })();

  // in-page message / confirm helpers (if not already present)
  if(typeof window.showSystemMessage !== 'function'){
    window.showSystemMessage = function(text, type='info', timeout=2500){
      const container = document.getElementById('sysModalContainer'); if(!container) return;
      container.innerHTML = '';
      const modal = document.createElement('div'); modal.className = 'sys-modal';
      const card = document.createElement('div'); card.className = 'sys-card ' + (type==='error'?'error': type==='success'?'success':'');
      card.innerHTML = `<div>${text}</div><div class="sys-actions"><button id="__sysCloseBtn" style="background:none;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:8px;color:var(--muted)">Close</button></div>`;
      modal.appendChild(card); container.appendChild(modal); container.setAttribute('aria-hidden','false');
      const btn = document.getElementById('__sysCloseBtn'); if(btn) btn.addEventListener('click', ()=>{ container.innerHTML=''; container.setAttribute('aria-hidden','true'); });
      if(timeout>0) setTimeout(()=>{ if(container){ container.innerHTML=''; container.setAttribute('aria-hidden','true'); } }, timeout);
    };
  }
  if(typeof window.showSystemConfirm !== 'function'){
    window.showSystemConfirm = function(text){
      return new Promise((resolve)=>{
        const container = document.getElementById('sysModalContainer'); if(!container) return resolve(false);
        container.innerHTML=''; const modal = document.createElement('div'); modal.className='sys-modal'; const card = document.createElement('div'); card.className='sys-card';
        card.innerHTML = `<div style="font-weight:700;margin-bottom:8px">Confirm</div><div>${text}</div><div class="sys-actions"><button id="__sysCancelBtn" style="background:none;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:8px;color:var(--muted)">Cancel</button><button id="__sysOkBtn" style="background:var(--accent);border:0;padding:8px 12px;border-radius:8px;color:#fff;font-weight:700">OK</button></div>`;
        modal.appendChild(card); container.appendChild(modal); container.setAttribute('aria-hidden','false');
        document.getElementById('__sysCancelBtn').addEventListener('click', ()=>{ container.innerHTML=''; container.setAttribute('aria-hidden','true'); resolve(false); });
        document.getElementById('__sysOkBtn').addEventListener('click', ()=>{ container.innerHTML=''; container.setAttribute('aria-hidden','true'); resolve(true); });
      });
    };
  }
  */
</script>
</body>
</html>
